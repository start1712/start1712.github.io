<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>start1712的个人网页</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        light: '#f5f5f5',
                        dark: '#1a1a2e',
                        accent: '#3b82f6',
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .theme-transition {
                transition: all 0.3s ease;
            }
            .icon-hidden {
                display: none !important;
            }
            .icon-visible {
                display: inline-block !important;
            }
        }
    </style>
</head>
<body class="min-h-screen bg-light dark:bg-dark theme-transition p-4 md:p-8 flex flex-col items-center gap-6 md:gap-8">
    <!-- 夜间模式切换按钮 -->
    <button 
        id="theme-toggle" 
        class="absolute top-4 right-4 p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 theme-transition hover:bg-accent hover:text-white"
        aria-label="切换明暗主题"
    >
        <!-- 月亮图标：亮模式显示 -->
        <i id="moon-icon" class="fa fa-moon-o text-xl" aria-hidden="true"></i>
        <!-- 太阳图标：暗模式显示 -->
        <i id="sun-icon" class="fa fa-sun-o text-xl" aria-hidden="true"></i>
    </button>

    <h1 class="text-4xl md:text-5xl font-bold text-gray-800 dark:text-gray-100 text-center mt-4 theme-transition">个人主页</h1>
    
    <div class="w-full max-w-4xl rounded-xl overflow-hidden shadow-lg dark:shadow-blue-900/20 theme-transition">
        <iframe src="//player.bilibili.com/player.html?isOutside=true&aid=80433022&bvid=BV1GJ411x7h7&cid=137649199&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
    </div>

    <script>
        // 获取元素引用
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        const moonIcon = document.getElementById('moon-icon');
        const sunIcon = document.getElementById('sun-icon');
        
        // 调试信息 - 帮助我们了解问题所在
        console.log('初始状态 - 页面加载时');
        console.log('localStorage中的主题:', localStorage.getItem('theme'));
        console.log('系统是否偏好暗色模式:', window.matchMedia('(prefers-color-scheme: dark)').matches);
        
        // 更新图标显示状态
        function updateIcons(isDarkMode) {
            if (isDarkMode) {
                // 暗模式: 显示太阳图标，隐藏月亮图标
                sunIcon.classList.remove('icon-hidden');
                sunIcon.classList.add('icon-visible');
                moonIcon.classList.remove('icon-visible');
                moonIcon.classList.add('icon-hidden');
            } else {
                // 亮模式: 显示月亮图标，隐藏太阳图标
                moonIcon.classList.remove('icon-hidden');
                moonIcon.classList.add('icon-visible');
                sunIcon.classList.remove('icon-visible');
                sunIcon.classList.add('icon-hidden');
            }
            console.log('图标已更新 - 暗模式:', isDarkMode);
        }
        
        // 初始化主题
        function initTheme() {
            // 检查本地存储的主题偏好
            const savedTheme = localStorage.getItem('theme');
            // 检查系统默认主题
            const isSystemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // 确定初始主题
            const isDarkMode = savedTheme === 'dark' || (!savedTheme && isSystemDark);
            
            // 应用主题类
            if (isDarkMode) {
                html.classList.add('dark');
            } else {
                html.classList.remove('dark');
                // 确保本地存储有明确的亮模式设置
                if (!savedTheme) localStorage.setItem('theme', 'light');
            }
            
            // 更新图标显示
            updateIcons(isDarkMode);
        }
        
        // 切换主题
        function toggleTheme() {
            const isDarkMode = html.classList.contains('dark');
            
            if (isDarkMode) {
                // 切换到亮模式
                html.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                updateIcons(false);
            } else {
                // 切换到暗模式
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                updateIcons(true);
            }
        }
        
        // 绑定事件
        themeToggle.addEventListener('click', toggleTheme);
        
        // 监听系统主题变化
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            // 只有当用户没有手动设置过主题时，才跟随系统变化
            if (!localStorage.getItem('theme')) {
                initTheme();
            }
        });
        
        // 页面加载完成后初始化主题
        window.addEventListener('DOMContentLoaded', () => {
            console.log('DOM加载完成，初始化主题');
            initTheme();
        });
    </script>
</body>
</html>
